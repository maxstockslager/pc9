"0","check_for_genomics <- function(genomics, metadata) {"
"0","  have_genomics <- genomics %>%"
"0","  group_by(line) %>%"
"0","  filter(!is.na(mgmt_methylation)) %>%"
"0","  summarize(have_genomics = T) "
"0","  "
"0","  all_lines <- data.frame(line = unique(metadata$line))"
"0","  "
"0","  have_genomics <- left_join(all_lines, have_genomics, by = ""line"")"
"0","  have_genomics$have_genomics[is.na(have_genomics$have_genomics)] <- FALSE"
"0","  "
"0","  return(have_genomics)"
"0","}"
"0","check_for_survival <- function(clinical, metadata) {"
"0","  have_survival <- clinical %>%"
"0","    group_by(line) %>%"
"0","    filter(!is.na(overall_survival)) %>%"
"0","    summarize(have_survival = T) "
"0","  "
"0","  all_lines <- data.frame(line = unique(metadata$line))"
"0","  "
"0","  have_survival <- left_join(all_lines, have_survival, by = ""line"")"
"0","  have_survival$have_survival[is.na(have_survival$have_survival)] <- FALSE"
"0","  "
"0","  return(have_survival)"
"0","}"
"0","have_genomics <- check_for_genomics(genomics, metadata)"
"2","Column `line` joining factor and character vector, coercing into character vector"
"0","have_survival <- check_for_survival(clinical, metadata)"
"2","Column `line` joining factor and character vector, coercing into character vector"
"0","have_metadata <- left_join(have_genomics, have_survival, by = ""line"")"
"0","invisible(have_metadata %>%"
"0","  rename(""MGMT"" = have_genomics,"
"0","         ""Overall survival"" = have_survival) %>%"
"0","  mutate(line = as.character(line)) %>%"
"0","  gather(key = metadata, value = status, cols = -line) %>%"
"0","    ggplot(mapping = aes(x = line, y = metadata, fill = status)) + "
"0","    geom_tile(color = ""black"","
"0","              width = 0.8,"
"0","              height = 0.8,"
"0","              size = 0.25) + "
"0","    theme(axis.line.x = element_blank(),"
"0","          axis.line.y = element_blank(), "
"0","          panel.border = element_blank(),"
"0","          strip.background = element_blank(),"
"0","          strip.text.x = element_text(size = 12,"
"0","                                      color = ""black""),"
"0","          axis.text.x = element_text(size = 11,"
"0","                                     angle = 90,"
"0","                                     hjust = 1,"
"0","                                     color = ""black""),"
"0","          axis.text.y = element_text(size = 12,"
"0","                                     color = ""black""),"
"0","          legend.title = element_text(size = 12,"
"0","                                      color = ""black""),"
"0","          legend.text = element_text(size = 12,"
"0","                                     color = ""black""),"
"0","          panel.grid.major = element_blank(),"
"0","          panel.grid.minor = element_blank(),"
"0","          panel.background = element_blank(),"
"0","          strip.text.y = element_text(size = 12,"
"0","                                      color = ""black"","
"0","                                      angle = 0),"
"0","          legend.position = ""none"") + "
"0","    theme(plot.margin = grid::unit(c(0,0,0,0), ""mm"")) +"
"0","    scale_fill_manual(limits = c(FALSE, TRUE), name = """", values = c(""grey80"", ""forestgreen""), labels = c(""Data missing"", ""Data collected""), na.value = ""grey80"") + "
"0","    xlab("""") + ylab("""") + "
"0","    coord_equal() + "
"0","    ggtitle(""Overall survival + MGMT methylation data collection"")"
"0","  )# + ggtitle(""SMR data collection status"")"
